{"ast":null,"code":"import _toConsumableArray from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import championsImage from\"./championslol.jpg\";import\"./style.css\";import{db}from'./firebase-config';import{collection,getDocs,getDocsFromServer,doc,getDoc,setDoc,updateDoc,addDoc}from'firebase/firestore';import Timer from\"./Timer\";import{setSelectionRange}from'@testing-library/user-event/dist/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMenu=_useState2[0],setShowMenu=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),xPos=_useState4[0],setXPos=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),yPos=_useState6[0],setYPos=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),yordles=_useState8[0],setYordles=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),foundYordles=_useState10[0],setFoundYordles=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),gameOver=_useState12[0],setGameOver=_useState12[1];var yordlesCollectionRef=collection(db,\"yordles\");var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),newScores=_useState14[0],setNewScores=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),highscore=_useState16[0],setHighscore=_useState16[1];var scoresAnonymousRef=doc(db,'scores','anonymousUser');var scoresRef=collection(db,'scores');var _useState17=useState(\"anonymous\"),_useState18=_slicedToArray(_useState17,2),userName=_useState18[0],setUserName=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),send=_useState20[0],setSend=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),startTime=_useState22[0],setStartTime=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),endTime=_useState24[0],setEndTime=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),start=_useState26[0],setStart=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),timerOn=_useState28[0],setTimerOn=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),allScores=_useState30[0],setAllScores=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),canShowScore=_useState32[0],setCanShowScore=_useState32[1];var _useState33=useState(0),_useState34=_slicedToArray(_useState33,2),highest=_useState34[0],setHighest=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),newRecord=_useState36[0],setNewRecord=_useState36[1];// get data from firestore database\nuseEffect(function(){var getYordles=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(yordlesCollectionRef);case 2:data=_context.sent;setYordles(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getYordles(){return _ref.apply(this,arguments);};}();getYordles();},[]);// get the pos of the mouse for the drop down menu on click\nuseEffect(function(){function handleClick(e){if(gameOver===false){if(!showMenu){setShowMenu(!showMenu);setXPos(e.pageX);setYPos(e.pageY);console.log(xPos,yPos);}else if(showMenu){setShowMenu(!showMenu);}}}document.addEventListener('click',handleClick);return function cleanupListener(){document.removeEventListener('click',handleClick);};},[showMenu,setShowMenu,gameOver]);// check pos of the yordles with firestore backend\nfunction checkValidity(e){yordles.forEach(function(yordle){if(!yordle.found){if((xPos<=yordle.coordX+25&&yPos<=yordle.coordY+25&&xPos>=yordle.coordX-25&&yPos>=yordle.coordY-25||xPos<=yordle.coordX-25&&yPos<=yordle.coordY-25&&xPos>=yordle.coordX+25&&yPos>=yordle.coordY+25)&&e.target.id===yordle.name){yordle.found=true;setFoundYordles([].concat(_toConsumableArray(foundYordles),[yordle.name]));console.log(foundYordles);}}});}useEffect(function(){if(foundYordles.length===3&&gameOver===false){setGameOver(true);}},[foundYordles,gameOver]);// drop down menu with yordles name\nfunction dropDownMenu(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"targetBox\",style:{left:xPos-50,top:yPos-50}}),/*#__PURE__*/_jsxs(\"ul\",{className:\"yordleList\",style:{left:xPos+80,top:yPos-45},children:[/*#__PURE__*/_jsx(\"li\",{id:\"Teemo\",onClick:function onClick(e){return checkValidity(e);},children:\"Teemo\"}),/*#__PURE__*/_jsx(\"li\",{id:\"Tristana\",onClick:function onClick(e){return checkValidity(e);},children:\"Tristana\"}),/*#__PURE__*/_jsx(\"li\",{id:\"Poppy\",onClick:function onClick(e){return checkValidity(e);},children:\"Poppy\"})]})]});}// fetch docs and pass it into an array and get the start time and end time to update the highscore\nuseEffect(function(){if(gameOver===true){var getScoresDb=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var dataScores,indexAnonymous,dataUserScores;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getDocs(scoresRef);case 2:dataScores=_context2.sent;setNewScores(dataScores.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));indexAnonymous=newScores.findIndex(function(item){return item.name===\"anonymous\";});setHighscore(Math.floor(newScores[indexAnonymous].endTime*100-newScores[indexAnonymous].startTime*100)/100);_context2.next=8;return updateDoc(scoresAnonymousRef,{score:highscore});case 8:_context2.next=10;return getDocs(scoresRef);case 10:dataUserScores=_context2.sent;setAllScores(dataUserScores.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));setGameOver(\"finish\");case 13:case\"end\":return _context2.stop();}}},_callee2);}));return function getScoresDb(){return _ref2.apply(this,arguments);};}();getScoresDb();}},[gameOver,highscore,send,scoresAnonymousRef,newScores,scoresRef]);function updatehigh(){return _updatehigh.apply(this,arguments);}// if send update the database, add new user with highscore\nfunction _updatehigh(){_updatehigh=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return addDoc(collection(db,\"scores\"),{name:userName,score:highscore});case 2:setCanShowScore(true);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _updatehigh.apply(this,arguments);}useEffect(function(){if(send){updatehigh();setSend(false);}},[highscore,userName,send]);function sendScore(){return _sendScore.apply(this,arguments);}function _sendScore(){_sendScore=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(highscore);setSend(true);setNewRecord(false);case 3:case\"end\":return _context4.stop();}}},_callee4);}));return _sendScore.apply(this,arguments);}useEffect(function(){if(gameOver===\"finish\"){var allScoresArr=allScores;var noAnArr=allScoresArr.filter(function(item){return item.name!==\"anonymous\";});noAnArr.sort(function(a,b){return a.score-b.score;});setHighest(noAnArr[0].score);if(highest>highscore){setNewRecord(true);}}},[highscore,highest,gameOver]);// show input for the username\nfunction showInputMenu(){return/*#__PURE__*/_jsxs(\"div\",{className:\"showScoresDiv\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"nameNewScore\",to:\"nameInput\",children:\"You have made an highscore type your username to save your highscore\"}),/*#__PURE__*/_jsx(\"input\",{name:\"nameInput\",id:\"nameInput\",onChange:function onChange(e){return setUserName(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"sendBtn\",onClick:function onClick(){return sendScore();},children:\"Send\"})]});}// render yordles found\nfunction renderFound(){return foundYordles.map(function(yordle){return/*#__PURE__*/_jsx(\"div\",{className:\"foundStyle\",children:yordle});});}// render image map\nfunction imageRender(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"lolChampions\",src:championsImage,alt:\"lolChampions\",useMap:\"#lolMap\",width:\"1500\",height:\"780\"}),/*#__PURE__*/_jsxs(\"map\",{name:\"lolMap\",children:[/*#__PURE__*/_jsx(\"area\",{alt:\"teemo\",id:\"Teemo\",coords:\"525,447,571,503\",shape:\"rect\"}),/*#__PURE__*/_jsx(\"area\",{alt:\"tristana\",id:\"Tristana\",coords:\"537,238,578,200\",shape:\"rect\"}),/*#__PURE__*/_jsx(\"area\",{alt:\"poppy\",id:\"Poppy\",coords:\"250,436,189,504\",shape:\"rect\"})]})]});}function showUserHighscore(){return _showUserHighscore.apply(this,arguments);}function _showUserHighscore(){_showUserHighscore=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var dataUserScores;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getDocs(scoresRef);case 2:dataUserScores=_context5.sent;setAllScores(dataUserScores.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));setCanShowScore(\"fetched\");case 5:case\"end\":return _context5.stop();}}},_callee5);}));return _showUserHighscore.apply(this,arguments);}useEffect(function(){if(canShowScore){showUserHighscore();}},[canShowScore]);// get start time and initialize the game \nfunction startGame(){setStart(true);setTimerOn(true);setStartTime(Date.now()/1000);setGameOver(false);}function restartGame(){window.location.reload();return false;}function finalShow(){allScores.sort(function(a,b){return a.score-b.score;});return/*#__PURE__*/_jsxs(\"div\",{className:\"scoresContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Highscores : \"}),allScores.map(function(item){if(item.name!==\"anonymous\")return/*#__PURE__*/_jsxs(\"div\",{className:\"paraScore\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"unitScore\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Score : \",item.score]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Username : \",item.name,\" \"]})})]});})]});}// render \nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Find the Yordles ! \"}),/*#__PURE__*/_jsx(\"h2\",{className:\"challenge\",children:\"Find Teemo, Tristana and Poppy\"}),/*#__PURE__*/_jsxs(\"h3\",{className:\"yordleTitleFound\",children:[\"Yordles found : \",renderFound(),\" \"]}),/*#__PURE__*/_jsx(Timer,{gameOver:gameOver,onGameOverChange:setGameOver,startTime:startTime,setStartTime:setStartTime,endTime:endTime,setEndTime:setEndTime,start:start,setStart:setStart,timerOn:timerOn,setTimerOn:setTimerOn}),canShowScore||gameOver?/*#__PURE__*/_jsx(\"button\",{className:\"restartBtn\",onClick:function onClick(){return restartGame();},children:\"RESTART\"}):null,showMenu?dropDownMenu():null,gameOver===\"finish\"?/*#__PURE__*/_jsxs(\"p\",{className:\"yourScore\",children:[\"Your score is : \",highscore]}):null,newRecord?showInputMenu():null,gameOver===false?imageRender():null,gameOver===null?/*#__PURE__*/_jsx(\"button\",{className:\"btnStart\",onClick:function onClick(){return startGame();},children:\"Start\"}):null,canShowScore===\"fetched\"||gameOver===\"finish\"?finalShow():null]});}export default App;","map":{"version":3,"sources":["/home/atsal/Desktop/top/secure-projects/FindWaldo/src/App.js"],"names":["React","useState","useEffect","championsImage","db","collection","getDocs","getDocsFromServer","doc","getDoc","setDoc","updateDoc","addDoc","Timer","setSelectionRange","App","showMenu","setShowMenu","xPos","setXPos","yPos","setYPos","yordles","setYordles","foundYordles","setFoundYordles","gameOver","setGameOver","yordlesCollectionRef","newScores","setNewScores","highscore","setHighscore","scoresAnonymousRef","scoresRef","userName","setUserName","send","setSend","startTime","setStartTime","endTime","setEndTime","start","setStart","timerOn","setTimerOn","allScores","setAllScores","canShowScore","setCanShowScore","highest","setHighest","newRecord","setNewRecord","getYordles","data","docs","map","id","handleClick","e","pageX","pageY","console","log","document","addEventListener","cleanupListener","removeEventListener","checkValidity","forEach","yordle","found","coordX","coordY","target","name","length","dropDownMenu","left","top","getScoresDb","dataScores","indexAnonymous","findIndex","item","Math","floor","score","dataUserScores","updatehigh","sendScore","allScoresArr","noAnArr","filter","sort","a","b","showInputMenu","value","renderFound","imageRender","showUserHighscore","startGame","Date","now","restartGame","window","location","reload","finalShow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport championsImage from \"./championslol.jpg\"\nimport \"./style.css\"\nimport { db } from './firebase-config'\nimport { collection, getDocs, getDocsFromServer, doc, getDoc, setDoc, updateDoc, addDoc } from 'firebase/firestore';\nimport Timer from \"./Timer\"\nimport { setSelectionRange } from '@testing-library/user-event/dist/utils';\n\nfunction App() {\n\n const [showMenu, setShowMenu] = useState(false);\n const [xPos, setXPos] = useState(0);\n const [yPos, setYPos] = useState(0);\n const [yordles, setYordles] = useState([]);\n const [foundYordles, setFoundYordles] = useState([])\n const [gameOver, setGameOver] = useState(null)\n const yordlesCollectionRef = collection(db, \"yordles\")\n const [newScores, setNewScores] = useState([])\n const [highscore, setHighscore] = useState(0);\n const scoresAnonymousRef = doc(db, 'scores', 'anonymousUser');\n const scoresRef = collection(db, 'scores');\n const [userName, setUserName] = useState(\"anonymous\");\n const [send, setSend] = useState(false)\n const [startTime, setStartTime] = useState(0);\n const [endTime, setEndTime] = useState(0);\n const [start, setStart] = useState(false)\n const [timerOn, setTimerOn] = useState(false);\n const [allScores, setAllScores] = useState([]);\n const [canShowScore, setCanShowScore] = useState(false);\n const [highest, setHighest] = useState(0);\n const [newRecord, setNewRecord] = useState(false);\n\n\n // get data from firestore database\n useEffect(() => {\n  const getYordles = async () => {\n    const data = await getDocs(yordlesCollectionRef);\n    setYordles(data.docs.map((doc) => ({...doc.data(),  id: doc.id})))\n  }\n\n  getYordles();\n\n }, []);\n \n\n\n // get the pos of the mouse for the drop down menu on click\nuseEffect(() => {\n  function handleClick(e) {\n    if(gameOver === false){\n    if(!showMenu) {\n    setShowMenu(!showMenu)\n    setXPos(e.pageX)\n    setYPos(e.pageY)\n    console.log(xPos, yPos)\n    } else if (showMenu) {\n      setShowMenu(!showMenu)\n    }\n  }\n  }\n   document.addEventListener('click', handleClick)\n   return function cleanupListener() {\n    document.removeEventListener('click', handleClick)\n  }\n\n  },[showMenu, setShowMenu, gameOver])\n\n\n // check pos of the yordles with firestore backend\n  function checkValidity(e) {\n    yordles.forEach((yordle) => {\n     if(!yordle.found) { \n      if( (((xPos <= yordle.coordX+25 && yPos <= yordle.coordY+25 ) && (xPos >= yordle.coordX-25 && yPos >= yordle.coordY-25 ))\n       || ((xPos <= yordle.coordX-25 && yPos <= yordle.coordY-25 ) && (xPos >= yordle.coordX+25 && yPos >= yordle.coordY+25 ))) && (e.target.id === yordle.name)) {\n        yordle.found = true\n        setFoundYordles([...foundYordles, yordle.name])\n        console.log(foundYordles)\n         \n      }\n    }\n    })\n  \n  }\n  useEffect(() => {\n     if(foundYordles.length === 3 && gameOver === false){\n       setGameOver(true)\n       \n     }\n  \n  },[foundYordles, gameOver])\n\n\n  // drop down menu with yordles name\n function dropDownMenu() {\n   return (\n    <div>\n    <div className=\"targetBox\" style={{ left: xPos-50, top: yPos-50}}></div>\n      <ul className=\"yordleList\" style={{ left: xPos+80, top: yPos-45}}>\n        <li id=\"Teemo\" onClick={(e) => checkValidity(e)}>Teemo</li>\n        <li id=\"Tristana\" onClick={(e) => checkValidity(e)}>Tristana</li>\n        <li id=\"Poppy\" onClick={(e) => checkValidity(e)}>Poppy</li>\n      </ul>\n    </div>\n  )\n}\n\n\n// fetch docs and pass it into an array and get the start time and end time to update the highscore\n  useEffect(() => {\n  if(gameOver === true) {\n    async function getScoresDb () {\n      const dataScores = await getDocs(scoresRef);\n      setNewScores(dataScores.docs.map((doc) => ({...doc.data(),  id: doc.id})))\n      const indexAnonymous = newScores.findIndex(item => item.name === \"anonymous\")\n      setHighscore(Math.floor(newScores[indexAnonymous].endTime * 100 - newScores[indexAnonymous].startTime * 100)/100);\n     await updateDoc(scoresAnonymousRef, {\n      score: highscore,\n    });\n    const dataUserScores = await getDocs(scoresRef);\n    setAllScores(dataUserScores.docs.map((doc) => ({...doc.data(),  id: doc.id})))\n    \n   \n    setGameOver(\"finish\")\n    }\n   \n    getScoresDb()\n\n  }\n },[gameOver, highscore, send, scoresAnonymousRef, newScores, scoresRef])\n\n\nasync function updatehigh() {\n  \n  await addDoc(collection(db, \"scores\"), {\n    name: userName,\n    score: highscore,\n  });\n  setCanShowScore(true)\n }\n\n\n// if send update the database, add new user with highscore\n  useEffect(() => {\n  if(send) {\n    updatehigh()\n    setSend(false)\n   \n }\n\n\n}, [highscore, userName, send])\n\n async function sendScore() {\n  console.log(highscore)\n    setSend(true)\n    setNewRecord(false)\n    \n  }\n  \n  useEffect(() => {\n    if (gameOver === \"finish\") {\n      let allScoresArr = allScores;\n      const noAnArr = allScoresArr.filter(item => item.name !== \"anonymous\");\n     noAnArr.sort(function(a, b){\n        return a.score - b.score\n      })\n\n    setHighest(noAnArr[0].score);\n     \n     if (highest > highscore) { \n     \n     setNewRecord(true)\n     \n     }\n    }\n  },[highscore, highest, gameOver])\n\n\n  // show input for the username\n  function showInputMenu() {\n    return (\n     <div className='showScoresDiv'>\n       <label className=\"nameNewScore\" to=\"nameInput\">You have made an highscore type your username to save your highscore</label>\n     <input name=\"nameInput\" id=\"nameInput\" onChange={(e) => setUserName(e.target.value)}></input>\n     <button className=\"sendBtn\" onClick={() => sendScore()}>Send</button>\n     </div>\n    )\n  }\n\n\n  // render yordles found\n  function renderFound() {\n   return (foundYordles.map(yordle => {\n        return (\n          <div className=\"foundStyle\">{yordle}</div>\n        )\n    }))\n  }\n\n  // render image map\n  function imageRender() {\n    return(<div>\n      <img className=\"lolChampions\" src={championsImage} alt=\"lolChampions\" useMap=\"#lolMap\" width=\"1500\" height=\"780\"></img>\n      <map name=\"lolMap\">\n      <area alt=\"teemo\" id=\"Teemo\" coords=\"525,447,571,503\" shape=\"rect\" />\n     <area alt=\"tristana\" id=\"Tristana\" coords=\"537,238,578,200\" shape=\"rect\" />\n     <area alt=\"poppy\" id=\"Poppy\" coords=\"250,436,189,504\" shape=\"rect\" />\n       </map>\n       </div>\n    )\n  }\n\n  async function showUserHighscore() {\n    const dataUserScores = await getDocs(scoresRef);\n    setAllScores(dataUserScores.docs.map((doc) => ({...doc.data(),  id: doc.id})))\n    setCanShowScore(\"fetched\")   \n  }\n\n  useEffect(() => {\n    if(canShowScore) {\n      showUserHighscore()\n    }\n  },[canShowScore])\n\n\n  // get start time and initialize the game \n  function startGame() {\n    setStart(true)\n    setTimerOn(true)\n    setStartTime(Date.now()/1000)\n    setGameOver(false)\n  }\n\n  function restartGame() {\n    window.location.reload();\n    return false;\n  }\n\n  function finalShow() {\n    allScores.sort(function (a, b) {\n      return a.score - b.score;\n    });\n    return(\n      <div className=\"scoresContainer\"><h1>Highscores : </h1>\n    {allScores.map(item  => {\n      if(item.name !== \"anonymous\")\n      return (\n        <div className=\"paraScore\">\n        <div className=\"unitScore\" ><p>Score : {item.score}</p></div>\n        <div><p>Username : {item.name} </p></div>\n        </div>\n      )\n    })}\n    </div>\n    )\n  }\n\n  // render \n  return (\n    <div className=\"App\">\n      <h1>Find the Yordles ! </h1> \n      <h2 className=\"challenge\">Find Teemo, Tristana and Poppy</h2>\n      <h3 className=\"yordleTitleFound\">Yordles found : {renderFound()} </h3>   \n      <Timer gameOver={gameOver} onGameOverChange={setGameOver} startTime={startTime} setStartTime={setStartTime} \n      endTime={endTime} setEndTime={setEndTime} start={start} setStart={setStart}\n      timerOn={timerOn} setTimerOn={setTimerOn}/>\n      {canShowScore || gameOver ?<button className=\"restartBtn\" onClick={() => restartGame()}>RESTART</button> : null}  \n      {showMenu ? dropDownMenu() : null}\n      {gameOver === \"finish\" ? <p className=\"yourScore\">Your score is : {highscore}</p> : null}\n      {newRecord ? showInputMenu() : null }\n      {gameOver === false ? imageRender() : null}\n      {gameOver === null ? <button className=\"btnStart\" onClick={() => startGame()}>Start</button> : null } \n      {canShowScore === \"fetched\" || gameOver === \"finish\" ? finalShow(): null}\n        </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}