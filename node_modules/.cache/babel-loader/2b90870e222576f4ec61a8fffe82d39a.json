{"ast":null,"code":"import _asyncToGenerator from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/atsal/Desktop/top/secure-projects/FindWaldo/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{doc,setDoc,Timestamp,updateDoc,getDocs,getDoc,collection}from\"firebase/firestore\";import{db}from'./firebase-config';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Timer(_ref){var gameOver=_ref.gameOver,setGameOver=_ref.setGameOver,startTime=_ref.startTime,setStartTime=_ref.setStartTime,start=_ref.start,setStart=_ref.setStart,endTime=_ref.endTime,setEndTime=_ref.setEndTime,timerOn=_ref.timerOn,setTimerOn=_ref.setTimerOn;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),time=_useState2[0],setTime=_useState2[1];var scoresAnonymousRef=doc(db,'scores','anonymousUser');function saveDataStart(){return _saveDataStart.apply(this,arguments);}function _saveDataStart(){_saveDataStart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return updateDoc(scoresAnonymousRef,{startTime:startTime});case 2:case\"end\":return _context.stop();}}},_callee);}));return _saveDataStart.apply(this,arguments);}function saveDataEnd(){return _saveDataEnd.apply(this,arguments);}function _saveDataEnd(){_saveDataEnd=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateDoc(scoresAnonymousRef,{endTime:endTime});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _saveDataEnd.apply(this,arguments);}useEffect(function(){var interval=null;if(gameOver===true){setEndTime(Date.now()/1000);setTimerOn(false);saveDataEnd();}if(timerOn&&gameOver===false){interval=setInterval(function(){setTime(function(prevTime){return prevTime+10;});},10);}else{clearInterval(interval);}return function(){return clearInterval(interval);};},[timerOn,gameOver]);useEffect(function(){if(start){saveDataStart();setStart(false);}},[start]);return/*#__PURE__*/_jsx(\"div\",{className:\"timerContainer\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[(\"0\"+Math.floor(time/60000%60)).slice(-2),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:(\"0\"+Math.floor(time/1000%60)).slice(-2)})]})});}export default Timer;","map":{"version":3,"sources":["/home/atsal/Desktop/top/secure-projects/FindWaldo/src/Timer.js"],"names":["React","useState","useEffect","doc","setDoc","Timestamp","updateDoc","getDocs","getDoc","collection","db","Timer","gameOver","setGameOver","startTime","setStartTime","start","setStart","endTime","setEndTime","timerOn","setTimerOn","time","setTime","scoresAnonymousRef","saveDataStart","saveDataEnd","interval","Date","now","setInterval","prevTime","clearInterval","Math","floor","slice"],"mappings":"wZAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,GAAT,CAAcC,MAAd,CAAsBC,SAAtB,CAAiCC,SAAjC,CAA4CC,OAA5C,CAAqDC,MAArD,CAA6DC,UAA7D,KAA+E,oBAA/E,CACA,OAASC,EAAT,KAAmB,mBAAnB,C,wFAEA,QAASC,CAAAA,KAAT,MAA8H,IAA7GC,CAAAA,QAA6G,MAA7GA,QAA6G,CAAnGC,WAAmG,MAAnGA,WAAmG,CAAtFC,SAAsF,MAAtFA,SAAsF,CAA3EC,YAA2E,MAA3EA,YAA2E,CAA7DC,KAA6D,MAA7DA,KAA6D,CAAtDC,QAAsD,MAAtDA,QAAsD,CAA5CC,OAA4C,MAA5CA,OAA4C,CAAnCC,UAAmC,MAAnCA,UAAmC,CAAvBC,OAAuB,MAAvBA,OAAuB,CAAdC,UAAc,MAAdA,UAAc,CAC1H,cAAwBpB,QAAQ,CAAC,CAAD,CAAhC,wCAAOqB,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,kBAAkB,CAAGrB,GAAG,CAACO,EAAD,CAAK,QAAL,CAAe,eAAf,CAA9B,CAF0H,QAK9Ge,CAAAA,aAL8G,iJAK7H,yJACSnB,CAAAA,SAAS,CAACkB,kBAAD,CAAqB,CAChCV,SAAS,CAAEA,SADqB,CAArB,CADlB,uDAL6H,wDAY7GY,CAAAA,WAZ6G,2IAY5H,+JACQpB,CAAAA,SAAS,CAACkB,kBAAD,CAAqB,CAAEN,OAAO,CAAEA,OAAX,CAArB,CADjB,yDAZ4H,8CAiB1HhB,SAAS,CAAC,UAAM,CACZ,GAAIyB,CAAAA,QAAQ,CAAG,IAAf,CAEA,GAAGf,QAAQ,GAAK,IAAhB,CAAsB,CAClBO,UAAU,CAACS,IAAI,CAACC,GAAL,GAAW,IAAZ,CAAV,CACAR,UAAU,CAAC,KAAD,CAAV,CACAK,WAAW,GAEd,CAED,GAAGN,OAAO,EAAIR,QAAQ,GAAK,KAA3B,CAAkC,CAChCe,QAAQ,CAAGG,WAAW,CAAC,UAAM,CAC3BP,OAAO,CAAC,SAAAQ,QAAQ,QAAIA,CAAAA,QAAQ,CAAG,EAAf,EAAT,CAAP,CACD,CAFqB,CAEpB,EAFoB,CAAtB,CAKD,CAND,IAMO,CACHC,aAAa,CAACL,QAAD,CAAb,CACH,CAED,MAAO,kBAAMK,CAAAA,aAAa,CAACL,QAAD,CAAnB,EAAP,CAEH,CAtBQ,CAsBN,CAACP,OAAD,CAAUR,QAAV,CAtBM,CAAT,CAyBAV,SAAS,CAAC,UAAM,CACd,GAAGc,KAAH,CAAS,CAETS,aAAa,GACbR,QAAQ,CAAC,KAAD,CAAR,CACC,CACF,CANQ,CAMN,CAACD,KAAD,CANM,CAAT,CASA,mBACI,YAAK,SAAS,CAAC,gBAAf,uBACI,oCACA,wBAAO,CAAC,IAAMiB,IAAI,CAACC,KAAL,CAAYZ,IAAI,CAAG,KAAR,CAAiB,EAA5B,CAAP,EAAwCa,KAAxC,CAA8C,CAAC,CAA/C,CAAP,OADA,cAEA,sBAAO,CAAC,IAAMF,IAAI,CAACC,KAAL,CAAYZ,IAAI,CAAG,IAAR,CAAgB,EAA3B,CAAP,EAAuCa,KAAvC,CAA6C,CAAC,CAA9C,CAAP,EAFA,GADJ,EADJ,CAQH,CAGD,cAAexB,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { doc, setDoc, Timestamp, updateDoc, getDocs, getDoc, collection } from \"firebase/firestore\"; \nimport { db } from './firebase-config';\n\nfunction Timer( {gameOver, setGameOver, startTime, setStartTime, start, setStart, endTime, setEndTime, timerOn, setTimerOn} ) {\n    const [time, setTime] = useState(0);\n    const scoresAnonymousRef = doc(db, 'scores', 'anonymousUser')\n\n\n async function saveDataStart() {\n    await updateDoc(scoresAnonymousRef, {\n        startTime: startTime\n      });\n    }  \n\n\n  async function saveDataEnd() {\n    await updateDoc(scoresAnonymousRef, { endTime: endTime});\n  }\n\n\n    useEffect(() => {\n        let interval = null;\n\n        if(gameOver === true) {\n            setEndTime(Date.now()/1000)\n            setTimerOn(false)\n            saveDataEnd()\n            \n        }\n\n        if(timerOn && gameOver === false) {\n          interval = setInterval(() => {\n            setTime(prevTime => prevTime + 10)\n          },10)\n         \n\n        } else {\n            clearInterval(interval)\n        }\n\n        return () => clearInterval(interval)\n\n    }, [timerOn, gameOver])\n\n\n    useEffect(() => {\n      if(start){\n       \n      saveDataStart()\n      setStart(false) \n      }\n    }, [start])\n\n \n    return (\n        <div className=\"timerContainer\">\n            <div>\n            <span>{(\"0\" + Math.floor((time / 60000) % 60)).slice(-2)}:</span>\n            <span>{(\"0\" + Math.floor((time / 1000) % 60)).slice(-2)}</span>\n            </div>\n        </div>\n    )\n}\n\n\nexport default Timer"]},"metadata":{},"sourceType":"module"}